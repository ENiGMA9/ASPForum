
@{
    ViewBag.Title = "ASPForum";
}

<div class="container category-container">
    <div class="row">
        <div class="col-auto">
            <h2>@ViewBag.Subject.Name</h2>
        </div>
        @if (ViewBag.NewThreadRight)
        {
            <a class="col align-self-center" href="/Subject/AddThread/@ViewBag.Subject.Id">
                <div>New Thread</div>
            </a>
        }
    </div>

    @if ( User.IsInRole("Administrator") || User.IsInRole("Moderator") ) {
        <a class="col align-self-center" href="/Subject/Delete/@ViewBag.Subject.Id">Delete Subject</a>
        <br/>
        <hr/>

        foreach (var category in ViewBag.Categories) {
            <a class="col-auto align-self-center" href="/Subject/MoveSubject/@ViewBag.Subject.Id/@category.Id">@category.Name</a>
            <br/>
        }

        <br/>
    }

    @if (ViewBag.Threads != null)
    {
        foreach (var thread in ViewBag.Threads)
        {

            <div class="row align-content-center align-bottom">
                <a class="col-auto align-self-center" href="/Thread/Show/@thread.Id">
                    <div class="category-title">@thread.Name</div>

                </a>
                @if (ViewBag.HasThreadDeleteRight)
                {
                    <form method="post" action="@Url.Action("Thread", "Delete", null, Request.Url.Scheme)/@thread.Id">

                        @Html.HttpMethodOverride(HttpVerbs.Delete)
                        <button type="submit">Delete Thread</button>

                    </form>
                }
            </div>
        }
    }
    else
    {
        <div>This subject has no threads.</div>
    }
</div>
